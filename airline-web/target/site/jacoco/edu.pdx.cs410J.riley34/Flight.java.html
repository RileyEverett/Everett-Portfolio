<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Flight.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Airline Web/REST Project</a> &gt; <a href="index.source.html" class="el_package">edu.pdx.cs410J.riley34</a> &gt; <span class="el_source">Flight.java</span></div><h1>Flight.java</h1><pre class="source lang-java linenums">package edu.pdx.cs410J.riley34;

import edu.pdx.cs410J.AbstractFlight;
import edu.pdx.cs410J.AirportNames;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Map;

/**
 * the Flight class for the CS410J airline Project
 */

public class Flight extends AbstractFlight implements java.lang.Comparable&lt;Flight&gt; {

	//private class variables
	private String sourceAirport;
	private String destinationAirport;
	private Date departDate;
	private Date arriveDate;
	private int flightNumber;

	/**
	 * constructor for the flight class. error checks arguments then
	 * creates a flight if they meet approved criteria.
	 *
	 * @param sourceAirport      string that holds a three letter airport code
	 * @param destinationAirport string that holds a three letter airport code
	 * @param departureDate      string that holds a MM/DD/YYYY format date
	 * @param arrivalDate        string that holds a MM/DD/YYYY format date
	 * @param arrivalTime        string that holds a 00:00 24 hr format time
	 * @param departureTime      string that holds a 00:00 24 hr format time
	 * @param flightNumber       int that holds a three digit flight number
	 */

	public Flight(int flightNumber, String sourceAirport, String departureDate, String departureTime, String departSuffix,
<span class="fc" id="L40">	              String destinationAirport, String arrivalDate, String arrivalTime, String arriveSuffix) {</span>
		//check to make sure can be no more than four numbers and no less than one
<span class="fc bfc" id="L42" title="All 4 branches covered.">		if(flightNumber &gt; 9999 || flightNumber &lt; 1) {</span>
<span class="fc" id="L43">			throw new IllegalArgumentException(&quot;Invalid Flight Number!&quot;);</span>
		} else {
<span class="fc" id="L45">			this.flightNumber = flightNumber;</span>
		}
		//get a map of valid names for testing
<span class="fc" id="L48">		Map&lt;String, String&gt; validNames = AirportNames.getNamesMap();</span>
		//check to make sure source and destination airports are not the same
<span class="fc bfc" id="L50" title="All 2 branches covered.">		if(sourceAirport.equalsIgnoreCase(destinationAirport)) {</span>
<span class="fc" id="L51">			throw new IllegalArgumentException(&quot;Duplicate Source and Destination Airports!&quot;);</span>
		} //check to make sure source and destination airports are three characters
<span class="pc bpc" id="L53" title="1 of 4 branches missed.">		else if(sourceAirport.length() != 3 || destinationAirport.length() != 3) {</span>
<span class="fc" id="L54">			throw new IllegalArgumentException(&quot;Invalid Airport Code&quot;);</span>
		} //check to make sure source and destination airports can only be characters
<span class="pc bpc" id="L56" title="1 of 4 branches missed.">		else if(!sourceAirport.matches(&quot;^[a-zA-Z]*$&quot;) || !destinationAirport.matches(&quot;^[a-zA-Z]*$&quot;)) {</span>
<span class="fc" id="L57">			throw new IllegalArgumentException(&quot;Invalid Airport Code&quot;);</span>
<span class="pc bpc" id="L58" title="2 of 4 branches missed.">		} else if(!validNames.containsKey(sourceAirport) || !validNames.containsKey(destinationAirport)) {</span>
<span class="nc" id="L59">			throw new IllegalArgumentException(&quot;Invalid Airport Code&quot;);</span>
		} else {
<span class="fc" id="L61">			this.sourceAirport = sourceAirport.toUpperCase();</span>
<span class="fc" id="L62">			this.destinationAirport = destinationAirport.toUpperCase();</span>

			//check to make sure dates are in the correct format for casting them to dates
<span class="fc" id="L65">			SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;M/dd/yyyy hh:mm a&quot;);</span>

<span class="fc" id="L67">			String concatDepartDate = departureDate + &quot; &quot; + departureTime + &quot; &quot; + departSuffix;</span>
<span class="fc" id="L68">			String concatArriveDate = arrivalDate + &quot; &quot; + arrivalTime + &quot; &quot; + arriveSuffix;</span>

			try {
<span class="fc" id="L71">				departDate = dateFormat.parse(concatDepartDate);</span>
<span class="fc" id="L72">				arriveDate = dateFormat.parse(concatArriveDate);</span>
<span class="fc" id="L73">			} catch (ParseException ex) {</span>
<span class="fc" id="L74">				throw new IllegalArgumentException(&quot;Invalid Date Format!&quot;);</span>
<span class="fc" id="L75">			}</span>
<span class="pc bpc" id="L76" title="1 of 2 branches missed.">			if((arriveDate.getTime() - departDate.getTime()) &lt; 1) {</span>
<span class="nc" id="L77">				throw new IllegalArgumentException(&quot;Departure time is after arrival time!&quot;);</span>
			}
		}
<span class="fc" id="L80">	}</span>

	/**
	 * access method for the flightNumber variable
	 *
	 * @return Flight classes flightNumber variable
	 */

	@Override
	public int getNumber() {
<span class="fc" id="L90">		return flightNumber;</span>
	}

	/**
	 * access method for the sourceAirport variable
	 *
	 * @return Flight classes sourceAirport variable
	 */

	@Override
	public String getSource() {
<span class="fc" id="L101">		return sourceAirport;</span>
	}

	public long getDepartTime() {
<span class="nc" id="L105">		return departDate.getTime();</span>
	}

	public Date getDepartDate() {
<span class="nc" id="L109">		return departDate;</span>
	}

	/**
	 * access method for the departureTime and departureDate variables
	 *
	 * @return Flight classes departureTime and departureDate variables with a space between them
	 */

	@Override
	public String getDepartureString() {
<span class="fc" id="L120">		DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT);</span>
<span class="fc" id="L121">		return dateFormat.format(departDate);</span>
	}

	/**
	 * access method for the destinationAirport variable
	 *
	 * @return Flight classes destinationAirport variable
	 */

	@Override
	public String getDestination() {
<span class="fc" id="L132">		return destinationAirport;</span>
	}

	/**
	 * access method for the arrivalTime and arrivalDate variables
	 *
	 * @return Flight classes arrivalTime and arrivalDate variable with a space between them
	 */

	public long getArriveTime() {
<span class="nc" id="L142">		return arriveDate.getTime();</span>
	}

	public Date getArriveDate() {
<span class="nc" id="L146">		return arriveDate;</span>
	}

	@Override
	public String getArrivalString() {
<span class="fc" id="L151">		DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT);</span>
<span class="fc" id="L152">		return dateFormat.format(arriveDate);</span>
	}

	/**
	 * access method for all of flights variables in write friendly format
	 *
	 * @return Flight classes variables with a space between them and after
	 */

	public String getWriteData() {
		//convert date to Calendar to output in correct format
<span class="nc" id="L163">		Calendar depart = Calendar.getInstance();</span>
<span class="nc" id="L164">		depart.setTime(departDate);</span>
<span class="nc" id="L165">		Calendar arrive = Calendar.getInstance();</span>
<span class="nc" id="L166">		arrive.setTime(arriveDate);</span>
<span class="nc" id="L167">		return flightNumber + &quot; &quot; + sourceAirport + &quot; &quot; + depart.get(Calendar.DAY_OF_MONTH) + &quot;/&quot; + (depart.get(Calendar.MONTH) + 1) + &quot;/&quot;</span>
<span class="nc" id="L168">				+ depart.get(Calendar.YEAR) + &quot; &quot; + depart.get(Calendar.HOUR) + &quot;:&quot; + depart.get(Calendar.MINUTE) + &quot; &quot; +</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">				(depart.get(Calendar.AM_PM) == Calendar.PM ? &quot;pm&quot; : &quot;am&quot;) + &quot; &quot; + destinationAirport + &quot; &quot; + arrive.get(Calendar.DAY_OF_MONTH) + &quot;/&quot; +</span>
<span class="nc" id="L170">				(arrive.get(Calendar.MONTH) + 1) + &quot;/&quot; + arrive.get(Calendar.YEAR) + &quot; &quot; + arrive.get(Calendar.HOUR) + &quot;:&quot;</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">				+ arrive.get(Calendar.MINUTE) + &quot; &quot; + (arrive.get(Calendar.AM_PM) == Calendar.PM ? &quot;pm&quot; : &quot;am&quot;);</span>
	}

	/**
	 * Formats the classes data into a format for the PrettyPrint class
	 *
	 * @return a String containing the Airline name and all flights it contains in a pretty print friendly format
	 */

	public String getPrettyData() {
<span class="nc" id="L181">		long diffMinutes = (arriveDate.getTime() - departDate.getTime()) / (60 * 1000);</span>
<span class="nc" id="L182">		DateFormat format = DateFormat.getDateTimeInstance(</span>
				DateFormat.LONG, DateFormat.SHORT);
<span class="nc" id="L184">		String formattedDepart = format.format(departDate);</span>
<span class="nc" id="L185">		String formattedArrive = format.format(arriveDate);</span>
<span class="nc" id="L186">		return &quot;Flight &quot; + flightNumber + &quot; That Departs &quot; + sourceAirport + &quot; on &quot; + formattedDepart + &quot; and arrives at &quot; +</span>
				destinationAirport + &quot; on &quot; + formattedArrive + &quot; for a total flight time of &quot; + diffMinutes + &quot; minutes&quot;;
	}

	/**
	 * return 1 if the local flight is alphabetically first compared to the arg flight, -1 if second and 0 if equal
	 *
	 * @param flight a flight to be compared to th local flight
	 * @return an int telling the caller how the local and arg flight compare
	 */
	@Override
	public int compareTo(Flight flight) {
<span class="nc" id="L198">		int compareValue = this.sourceAirport.compareTo(flight.getSource());</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">		if(compareValue &gt; 0) {</span>
<span class="nc" id="L200">			return 1;</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">		} else if(compareValue &lt; 0) {</span>
<span class="nc" id="L202">			return -1;</span>
		} else {
<span class="nc" id="L204">			long compareTime = this.getDepartTime() - flight.getDepartTime();</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">			if(compareTime &gt; 0) {</span>
<span class="nc" id="L206">				return 1;</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">			} else if(compareTime &lt; 0) {</span>
<span class="nc" id="L208">				return -1;</span>
			} else {
<span class="nc" id="L210">				return 0;</span>
			}
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>